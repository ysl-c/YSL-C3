# compile with -af -lSDL2

%include "std/core_c99.ysl"
%include "bind/sdl.ysl"

asm #include <assert.h>

func main -> i32
	extern i32 puts addr
	let addr error

	SDL_Init SDL_INIT_VIDEO

	let addr window
	let addr renderer

	SDL_CreateWindow "Test" SDL_WINDOWPOS_CENTERED SDL_WINDOWPOS_CENTERED 640 480 0 -> window
	SDL_CreateRenderer window -1 0 -> renderer

	# render stuff
	SDL_SetRenderDrawColor renderer 255 255 255 255
	SDL_RenderClear renderer
	SDL_RenderPresent renderer
	SDL_Delay 4000

	SDL_DestroyWindow window
	SDL_DestroyRenderer renderer
	SDL_Quit
	return 0
end
